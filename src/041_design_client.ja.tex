\section{クライアント側設計}
本節では、クライアントを構成する4つのモジュールについて述べる。

\subsubsection{認証モジュール}
認証モジュールでは、ユーザの新規登録とログイン機能を提供する。
ユーザの認証情報はサーバに保存するため、ユーザは複数の端末から本アプリケーションを利用できる。

\subsubsection{ブックマーク保存モジュール}
ブックマーク保存モジュールでは、Webページをサーバに保存する。

ユーザが本モジュールを起動すると、Webコンテンツに対してJavaScriptプログラムを実行する。
プログラムは、WebページのタイトルやURLといった基本情報に加えて、スクロール位置や動画再生位置といったような閲覧状態に関する情報を取得する。
取得した情報はサーバのデータベースに保存される。

ブックマーク保存モジュールで取得するデータとその用途を表\ref{tb:design-save-bookmark-data-usage}に示す。

% textlint-disable
\begin{table}[htbp]
  \label{tb:design-save-bookmark-data-usage}
  \caption{ブックマーク保存モジュールで取得するデータとその用途}
  \begin{center}
    \begin{tabular}{|l|l|}
      \hline
      保存するデータ & 用途 \\\hline\hline
      URL & ブックマーク機能実現 \\\hline
      ページタイトル & ブックマーク機能実現 \\\hline
      保存時のスクロール位置(横) & 閲覧状態復元 \\\hline
      保存時のスクロール位置(縦) & 閲覧状態復元 \\\hline
      保存時のページ長(横) & 閲覧状態復元 \\\hline
      保存時のページ長(縦) & 閲覧状態復元 \\\hline
      保存時のズーム率 & 閲覧状態復元 \\\hline
      保存時のブラウザ & 閲覧状態復元 \\\hline
      保存時の動画再生位置 & 閲覧状態復元 \\\hline
    \end{tabular}
  \end{center}
\end{table}
% textlint-enable

\subsubsection{一覧モジュール}
一覧モジュールでは、前項のブックマーク保存モジュールで保存したWebページを一覧する画面を提供する。
表示されているブックマークをタップすると、ブックマーク閲覧状態復元モジュールに遷移する。
本モジュールでは、ブックマークの削除やお気に入り登録、任意のフォルダの作成およびコンテンツの整理が可能である。

\subsubsection{閲覧状態復元モジュール}
閲覧状態復元モジュールでは、ユーザが保存したブックマークをブラウザ上で開き、保存時の閲覧状態を復元する。
ブックマークが読み込まれたタイミングでJavaScriptコードを実行し、ブックマーク保存モジュールで取得したデータに基づいて閲覧状態を復元する。
スクロール位置は、保存時と復元時それぞれにおける使用ブラウザや画面サイズ、ズーム率などの情報から再計算する。
その結果として得られたスクロール位置を、HTMLのAPIを利用してページに反映させる。
動画や音声の再生位置についても、HTMLのAPIを利用して設定する。
PDFのページ数については、サーバ側でURLのフラグメントにページ数を付与しているため、そのURLをそのまま開くことで復元できる。
